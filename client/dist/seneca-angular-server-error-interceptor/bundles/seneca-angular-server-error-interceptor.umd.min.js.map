{"version":3,"sources":["ng://seneca-angular-server-error-interceptor/lib/seneca-angular-server-error-interceptor.service.ts","ng://seneca-angular-server-error-interceptor/lib/seneca-angular-server-error-interceptor.component.ts","ng://seneca-angular-server-error-interceptor/lib/seneca-angular-server-error-interceptor.module.ts"],"names":["ServerErrorInterceptor","prototype","intercept","req","next","console","log","handle","pipe","retry","catchError","error","throwError","Injectable","args","providedIn","SenecaAngularServerErrorInterceptorComponent","ngOnInit","Component","selector","template","SenecaAngularServerErrorInterceptorModule","NgModule","declarations","imports","exports"],"mappings":"0ZAAA,IAAAA,GAmBEA,EAAAC,UAAAC,UAAA,SACEC,EACAC,GAGA,OADAC,QAAQC,IAAI,iDACLF,EAAKG,OAAOJ,GAAKK,KACtBC,EAAAA,MAAM,GACNC,EAAAA,WAAU,SAAEC,GACV,OAAOC,EAAAA,WAAWD,2BAhBzBE,EAAAA,WAAUC,KAAA,CAAC,CACVC,WAAY,iHADd,SAAAf,KCXA,IAAAgB,GAeEA,EAAAf,UAAAgB,SAAA,iCAbDC,EAAAA,UAASJ,KAAA,CAAC,CACTK,SAAU,8CACVC,SAAU,0HAcZJ,GALE,SAAAA,KCbF,IAAAK,uBAGCC,EAAAA,SAAQR,KAAA,CAAC,CACRS,aAAc,CAACP,GACfQ,QAAS,GAETC,QAAS,CAACT,OAE6CK,GANzD,SAAAA","sourcesContent":["import { Injectable } from '@angular/core';\nimport {\n  HttpErrorResponse,\n  HttpEvent,\n  HttpHandler,\n  HttpInterceptor,\n  HttpRequest\n} from '@angular/common/http';\nimport { Observable, throwError } from 'rxjs';\nimport { catchError, retry } from 'rxjs/operators';\n\n@Injectable({\n  providedIn: 'root'\n})\n\n/**\n * intercept every single server call, retry once and rethrow the error if it persists\n */\nexport class ServerErrorInterceptor implements HttpInterceptor {\n  intercept(\n    req: HttpRequest<any>,\n    next: HttpHandler\n  ): Observable<HttpEvent<any>> {\n    console.log(\"using seneca-angular-server-error-interceptor\");\n    return next.handle(req).pipe(\n      retry(1),\n      catchError((error: HttpErrorResponse) => {\n        return throwError(error);\n      })\n    );\n  }\n}\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'lib-seneca-angular-server-error-interceptor',\n  template: `\n    <p>\n      seneca-angular-server-error-interceptor works!\n    </p>\n  `,\n  styles: []\n})\nexport class SenecaAngularServerErrorInterceptorComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { SenecaAngularServerErrorInterceptorComponent } from './seneca-angular-server-error-interceptor.component';\n\n@NgModule({\n  declarations: [SenecaAngularServerErrorInterceptorComponent],\n  imports: [\n  ],\n  exports: [SenecaAngularServerErrorInterceptorComponent]\n})\nexport class SenecaAngularServerErrorInterceptorModule { }\n"]}